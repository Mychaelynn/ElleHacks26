<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Penny's Shop - Spend or Save?</title>
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="shopping.css" />
  </head>
  <body class="setup-bg">
    <nav class="game-nav">
      <a href="main.html" class="nav-item">üè† Adventure Hub</a>
      <a href="garden.html" class="nav-item">üåª Garden</a>
      <a href="chores.html" class="nav-item">üßπ Chores</a>
      <a href="plane.html" class="nav-item">‚úàÔ∏è Purchase Ticket </a>
    </nav>

    <div class="stats-board">
      <h3>Your Progress</h3>

      <p><strong>Goal:</strong> <span id="stat-goal-name">Loading...</span></p>
      <p><strong>Still Need:</strong> $<span id="stat-needed">0</span></p>
      <hr />
      <p>Spendings: $<span id="stat-spendings">0</span></p>
      <p>Savings: $<span id="stat-savings">0</span></p>
      <p>Rainy Day: $<span id="stat-rainyDay">0</span></p>
    </div>

    <div class="main-content">
      <h1>The Arcade & Gift Shop</h1>
      <p>Will you spend your coins or save for your goal?</p>

      <div class="shop-grid">
        <div
          class="shop-card"
          onclick="buyItem('Gatcha Play', 5, 'playGatcha')"
        >
          <div class="image-wrapper">
            <img src="shopping/gacha.png" alt="Gatcha Machine" />
          </div>
          <h3>Gatcha Prize</h3>
          <p class="price">$5</p>
          <button class="buy-btn">Play!</button>
        </div>

        <div class="shop-card" onclick="buyItem('GoldChain', 15, 'equipChain')">
          <div class="image-wrapper">
            <img src="shopping/gold.png" alt="GoldChain" />
          </div>
          <h3>WealthSimple Gold Chain</h3>
          <p class="price">$15</p>
          <button class="buy-btn">Buy WealthSimple Gold Chain</button>
        </div>

        <div class="shop-card" onclick="buyItem('Snake Game', 2, 'playSnake')">
          <div class="image-wrapper">
            <img src="shopping/snake.png" alt="Snake Game" />
          </div>
          <h3>Play Snake</h3>
          <p class="price">$2</p>
          <button class="buy-btn">Play Game</button>
        </div>

        <div
          class="shop-card"
          onclick="buyItem('Magic Cursor', 10, 'unlockCursor')"
        >
          <div class="image-wrapper">
            <img src="shopping/cursorTogether.png" alt="Custom Cursor" />
          </div>
          <h3>Magic Cursor</h3>
          <p class="price">$10</p>
          <button class="buy-btn">Unlock</button>
        </div>
      </div>
    </div>

    <!-- Penny Chat (Bottom Right Corner) -->
    <div class="penny-fixed-corner" onclick="togglePennyChat()">
      <img src="mascot.png" alt="Penny" id="penny-icon" />
    </div>

    <div id="penny-chat-window" class="chat-hidden">
      <div class="chat-header">
        <span>Penny's Tips üê∑</span>
        <button onclick="togglePennyChat()" class="close-chat">√ó</button>
      </div>

      <div id="chat-messages"></div>

      <div class="chat-input-area">
        <input
          type="text"
          id="user-query"
          placeholder="Ask Penny..."
          onkeypress="if (event.key === 'Enter') sendToGemini();"
        />
        <button onclick="sendToGemini()">Send</button>
      </div>
    </div>

    <div id="video-overlay">
      <video id="gacha-video">
        <source src="shopping/gacha.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <button class="close-video-btn" onclick="closeVideo()">
        Close Video
      </button>
    </div>

    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
    <script type="module" src="shopping.js"></script>
  </body>
</html>
